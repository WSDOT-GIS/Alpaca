<!DOCTYPE html>
<html>
<head>
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>ALPACA - Application for Local Planning and Community Accessibility</title>
	<link rel="stylesheet" href="//js.arcgis.com/3.8/js/esri/css/esri.css" />
	<link href="//js.arcgis.com/3.8/js/dojo/dijit/themes/claro/claro.css" rel="stylesheet" />
	<link href="Style/index.min.css" rel="stylesheet" />

	<script>
		(function() {
			"use strict";
			var url, re = /\/[^\/]+$/;

			url = re.test(location.href) ? location.href.replace(re, "/") : location.href;

			var dojoConfig = {
				async: true,
				parseOnLoad: true,
				paths: {
					"alpaca": url + "Scripts/wsdot/alpaca",
					"GtfsService": url + "GTFS-Service/GtfsService/Scripts"
				},
				packages: [
					{
						name: "CSV-Reader",
						location: url + "Scripts/wsdot/CSV-Reader"
					},
					{
						name: "layerUtils",
						location: url + "Scripts/wsdot/layerUtils"
					},
					{
						name: "queryUtils",
						location: url + "Scripts/wsdot/queryUtils"
					}
				]
			};

			window.dojoConfig = dojoConfig;
		}());
	</script>
	<script src="//js.arcgis.com/3.8/"></script>
	<script src="//cdn-geoweb.s3.amazonaws.com/terraformer/1.0.2/terraformer.min.js"></script>
	<script src="//cdn-geoweb.s3.amazonaws.com/terraformer-arcgis-parser/1.0.1/terraformer-arcgis-parser.min.js"></script>
	<script src="Scripts/default.js"></script>
	<script type="text/javascript">
		// Setup Google Analytics, but not if user has specified that they don't want to be tracked.
		var _gaq = _gaq || [];
		(function (dnt) {
			if (dnt !== "yes" && dnt !== "1") {
				_gaq.push(['_setAccount', 'UA-970887-21']);
				_gaq.push(['_trackPageview']);

				(function () {
					var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
					ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
					var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
				})();
			}
		}(navigator.doNotTrack || navigator.msDoNotTrack || null));

	</script>
</head>
<body class="claro">
	<div id="outerBorderContainer" data-dojo-type="dijit/layout/BorderContainer" data-dojo-props="gutters:false">
		<div id="headerPane" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'top'">
			<img id="wsdotLogo" src="//www.wsdot.wa.gov/media/images/back/greenlogo.png" alt="WSDOT" height="39" width="240" />
			<h1>

				<!--<abbr title="Washington State Department of Transportation">WSDOT</abbr>-->
				<abbr title="Application for Local Planning and Community Accessibility">ALPACA</abbr>
			</h1>
		</div>
		<div id="outerContentPane" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region: 'center'">
			<div id="borderContainer"
				 data-dojo-type="dijit/layout/BorderContainer"
				 data-dojo-props="design:'headline', gutters:false, liveSplitters:true">
				<div id="sidebarPane" data-dojo-type="dijit/layout/ContentPane"
					 data-dojo-props="splitter:true, region:'leading'">

					<div data-dojo-type="dijit/layout/AccordionContainer">
						<div data-dojo-type="dijit/layout/ContentPane" title="View">
							<div id="layerToggle"></div>
							<div id="userAddedDataSection">
								<button type="button" id="addDataButton" data-dojo-type="dijit/form/Button">Add</button>
								<h1>Data Layers</h1>
								<ul id="graphicsLayerList"></ul>
							</div>
						</div>
						<div data-dojo-type="dijit/layout/ContentPane" title="Title VI charts">
							<div>
								<div id="languageChart" style="width: 300px; height: 300px;"></div>
								<table class="chart-legend language-chart-legend">
									<tr><td></td><td>Below Title VI Threshold</td></tr>
									<tr><td></td><td>Meets or exceeds Title VI Threshold</td></tr>
								</table>
							</div>
							<div>
								<div id="minorityChart" style="width: 300px; height: 300px;"></div>
							</div>
						</div>
						<div data-dojo-type="dijit/layout/ContentPane" title="Env. Justice charts">
							<div>
								<div id="povertyChart" style="width: 300px; height: 300px;"></div>
							</div>
						</div>
						<div data-dojo-type="dijit/layout/ContentPane" title="Population charts">
							<div>
								<div id="ageChart" style="width: 300px; height: 300px;"></div>
								<div id="veteranChart" style="width: 300px; height: 300px;"></div>
							</div>
						</div>
					</div>

				</div>
				<div id="mapPane" data-dojo-type="dijit/layout/ContentPane"
					 data-dojo-props="splitter:true, region:'center'">
					<div id="map">
						<div id="toolbar" class="toolbar" data-dojo-type="dijit/Toolbar">
							<div data-dojo-type="dijit/form/DropDownButton">
								<span>Service Area</span>
								<div data-dojo-type="dijit/DropDownMenu">
									<div data-dojo-type="dijit/PopupMenuItem" data-dojo-props="disabled: false">
										<span>By Layer</span>
										<div data-dojo-type="dijit/TooltipDialog">
											<div id="saLayerSelectContainer">
												<select id="countyServiceAreaSelect">
													<option disabled="disabled">Select a county...</option>
												</select>
											</div>
										</div>
									</div>
									<div id="drawServiceAreaButton" data-alpaca-mode="service-area" data-dojo-type="dijit/MenuItem">Draw custom</div>
									<div id="clearServiceAreaButton" data-layer-id="serviceArea" data-dojo-type="dijit/MenuItem"
										 data-dojo-props="iconClass:'dijitEditorIcon dijitEditorIconDelete'">Clear</div>
								</div>
							</div>
							<div id="aoiButton" data-dojo-type="dijit/form/DropDownButton" data-dojo-props="disabled: true">
								<span>Area of Interest</span>
								<div data-dojo-type="dijit/DropDownMenu">
									<div data-dojo-type="dijit/PopupMenuItem" data-dojo-props="disabled: false">
										<span>By Layer</span>
										<div data-dojo-type="dijit/TooltipDialog">
											<div id="aoiLayerSelectContainer">
												<select id="countyAOISelect">
													<option disabled="disabled">Select a county...</option>
												</select>
											</div>
										</div>
									</div>
									<div data-dojo-type="dijit/PopupMenuItem">
										<span>Draw custom</span>
										<div data-dojo-type="dijit/DropDownMenu">
											<div id="drawPointsSelectionButton" data-alpaca-mode="aoi" data-geometry-type="MULTI_POINT" data-dojo-type="dijit/MenuItem">Points</div>
											<div id="drawLineSelectionButton" data-alpaca-mode="aoi" data-geometry-type="POLYLINE" data-dojo-type="dijit/MenuItem">Lines</div>
											<div id="drawPolylineSelectionButton" data-alpaca-mode="aoi" data-geometry-type="POLYGON" data-dojo-type="dijit/MenuItem">Polygon</div>
										</div>
									</div>

									<div id="clearSelectionButton" data-layer-id="aoi"
										 data-dojo-type="dijit/MenuItem"
										 data-dojo-props="iconClass:'dijitEditorIcon dijitEditorIconDelete'">Clear</div>
								</div>
							</div>

							<div id="basemapButton" data-dojo-type="dijit/form/DropDownButton" title="Change the basemap">
								<span>Basemap</span>
								<div data-dojo-type="dijit/TooltipDialog">
									<div id="basemapGallery"></div>
								</div>
							</div>
							<div id="printMenuItem" data-dojo-type="dijit/form/Button" data-dojo-props="iconClass:'dijitEditorIcon dijitEditorIconPrint'">Print</div>
							<div id="helpButton" data-dojo-type="dijit/form/Button" data-url="http://www.wsdot.wa.gov/NR/rdonlyres/6E8780F3-0D5E-478E-AF2F-939FB5A63756/0/ALPACA_HelpGuideFINAL.pdf">Help</div>
						</div>
						<progress id="mapProgress">Loading data...</progress>
					</div>

				</div>
			</div>
		</div>
	</div>
	<form id="printForm" hidden="hidden" action="Print.aspx" target="alpaca_print" method="post">
		<input name="extent" type="hidden" />
		<input name="chartdata" type="hidden" />
		<input name="aoigraphics" type="hidden" />
		<input name="aoirenderer" type="hidden" />
		<input name="sagraphics" type="hidden" />
		<input name="sarenderer" type="hidden" />
		<input name="censuslayer" type="hidden" />
	</form>

	<div id="addCsvDialog" data-dojo-type="dijit/Dialog" data-dojo-props='title:"Add data to map"'>
		<section>
			<h1>GTFS</h1>
			<select id="gtfsAgencySelect" disabled="disabled"></select>
		</section>
		<section>
			<h1>CSV</h1>
			<input id="addCsvFileInput" type="file" />
		</section>
	</div>
</body>
</html>
